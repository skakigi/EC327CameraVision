package com.example.cameraapp

import android.Manifest
import android.content.ContentResolver
import android.content.ContentValues
import android.content.pm.PackageManager
import android.graphics.BitmapFactory
import android.net.Uri
import android.os.Build
import android.os.Bundle
import android.os.Environment
import android.provider.MediaStore
import android.util.Log
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import androidx.camera.core.CameraSelector
import androidx.camera.core.ImageCapture
import androidx.camera.core.ImageCaptureException
import androidx.camera.core.Preview
import androidx.camera.lifecycle.ProcessCameraProvider
import androidx.core.app.ActivityCompat
import androidx.core.content.ContextCompat
import com.example.cameraapp.Analyze.distance
import com.example.cameraapp.Analyze.readMat
import com.example.cameraapp.databinding.ActivityMainBinding
import com.example.cameraapp.makeGray.Grayscale
import java.io.BufferedReader
import java.io.File
import java.io.FileDescriptor
import java.io.FileReader
import java.text.SimpleDateFormat
import java.util.*
import java.util.concurrent.ExecutorService
import java.util.concurrent.Executors





typealias LumaListener = (luma: Double) -> Unit


class MainActivity : AppCompatActivity() {
    private lateinit var viewBinding: ActivityMainBinding

    private var imageCapture: ImageCapture? = null

    private lateinit var cameraExecutor: ExecutorService

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        viewBinding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(viewBinding.root)

        // Request camera permissions
        if (allPermissionsGranted()) {
            startCamera()
        } else {
            ActivityCompat.requestPermissions(
                this, REQUIRED_PERMISSIONS, REQUEST_CODE_PERMISSIONS)
        }

        // Set up the listeners for take photo and video capture buttons
        viewBinding.imageCaptureButton.setOnClickListener { takePhoto() }

        cameraExecutor = Executors.newSingleThreadExecutor()
    }

    private fun takePhoto() {
        // Get a stable reference of the modifiable image capture use case
        val imageCapture = imageCapture ?: return
        // Create time stamped name and MediaStore entry.
        val name = SimpleDateFormat(FILENAME_FORMAT, Locale.US)
            .format(System.currentTimeMillis())
        val contentValues = ContentValues().apply {
            put(MediaStore.MediaColumns.DISPLAY_NAME, name)
            put(MediaStore.MediaColumns.MIME_TYPE, "image/jpeg")

            if(Build.VERSION.SDK_INT > Build.VERSION_CODES.P) {
                put(MediaStore.Images.Media.RELATIVE_PATH, "Pictures/CameraX-Image")

            }

        }

        println("p2")
        // Create output options object which contains file + metadata
        val outputOptions = ImageCapture.OutputFileOptions
            .Builder(contentResolver,
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                contentValues)
            .build()

        // Set up image capture listener, which is triggered after photo has
        // been taken
        imageCapture.takePicture(outputOptions, ContextCompat.getMainExecutor(this),
            object : ImageCapture.OnImageSavedCallback {
                override fun onError(exc: ImageCaptureException) {
                    Log.e(TAG, "Photo capture failed: ${exc.message}", exc)
                }

                override fun
                        onImageSaved(output: ImageCapture.OutputFileResults){
                    val msg = "Photo capture succeeded: ${output.savedUri}"
                    Toast.makeText(baseContext, msg, Toast.LENGTH_SHORT).show()
                    Log.d(TAG, msg)
                    //val file : String = MediaStore.Images.Media.RELATIVE_PATH
                    val catRet= output.savedUri?.let { Cat(it) }
                    print(catRet)
                    if(catRet==1){
                        //play audio and show visual for apple
                    }
                    else if(catRet==2){
                        //play audio and show visual for banana
                    }
                    else if(catRet==3){
                        //play audio and show visual for orange
                    }
                    //val imageView = findViewById<ImageView>(R.id.my_image_view)
                    }

            }
        )

    }
    private fun startCamera() {
        val cameraProviderFuture = ProcessCameraProvider.getInstance(this)

        cameraProviderFuture.addListener({
            // Used to bind the lifecycle of cameras to the lifecycle owner
            val cameraProvider: ProcessCameraProvider = cameraProviderFuture.get()

            // Preview
            val preview = Preview.Builder()
                .build()
                .also {
                    it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)
                }

            imageCapture = ImageCapture.Builder()
                .build()
            // Select back camera as a default
            val cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA

            /*val imageAnalyzer = ImageAnalysis.Builder()
                .build()
                .also {
                    it.setAnalyzer(cameraExecutor, LuminosityAnalyzer { luma ->
                        Log.d(TAG, "Average luminosity: $luma")
                    })


                }
            */
            try {
                // Unbind use cases before rebinding
                cameraProvider.unbindAll()

                // Bind use cases to camera
                cameraProvider.bindToLifecycle(
                    this, cameraSelector, preview, imageCapture)

            } catch(exc: Exception) {
                Log.e(TAG, "Use case binding failed", exc)
            }

        }, ContextCompat.getMainExecutor(this))
    }

    private fun allPermissionsGranted() = REQUIRED_PERMISSIONS.all {
        ContextCompat.checkSelfPermission(
            baseContext, it) == PackageManager.PERMISSION_GRANTED
    }

    override fun onDestroy() {
        super.onDestroy()
        cameraExecutor.shutdown()
    }
    override fun onRequestPermissionsResult(
        requestCode: Int, permissions: Array<String>, grantResults:
        IntArray) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults)
        if (requestCode == REQUEST_CODE_PERMISSIONS) {
            if (allPermissionsGranted()) {
                startCamera()
            } else {
                Toast.makeText(this,
                    "Permissions not granted by the user.",
                    Toast.LENGTH_SHORT).show()
                finish()
            }
        }
    }
    fun Cat(A:Uri): Int{

        // Load the image file
        val parcelFileDescriptor = contentResolver.openFileDescriptor(A,"r");
        val fileDescriptor : FileDescriptor = parcelFileDescriptor!!.fileDescriptor
        val image = BitmapFactory.decodeFileDescriptor(fileDescriptor)
        parcelFileDescriptor.close()


        // Get the width and height of the image

        //val width = image.width

        //val height = image.height



        // Create a two-dimensional array to store the pixel values

        val matrix = IntArray(4096)



        // Loop through each pixel in the image and add its RGB value to the matrix

        for (y in 0 until 64) {

            for (x in 0 until 64) {

                val color = image.getPixel(x, y)

                matrix[y+x] = color

            }

        }

        //grascale all images
        //Grayscale(matrix)

        //val appfile :String =this.getApplicationInfo().dataDir+File.separatorChar+"Average_Apple.csv"

        //val app = intArrayOf(196,196,195,197,195,196,197,198,200,201,200,198,199,201,201,200,201,198,197,198,198,197,196,193,195,196,194,194,194,194,194,194,193,190,191,191,191,191,190,189,189,190,193,193,190,191,192,191,192,193,193,193,192,191,194,198,197,196,193,190,190,189,188,190,196,197,196,195,198,199,198,198,200,199,196,196,196,199,198,198,200,200,198,199,199,197,196,194,193,196,194,192,193,194,193,191,190,191,191,190,190,192,193,192,190,192,192,191,192,191,192,192,193,194,195,193,193,191,192,196,198,197,196,191,189,189,191,191,197,198,198,196,197,198,197,199,200,201,199,197,196,198,197,197,199,200,199,198,201,201,201,198,197,198,196,194,194,195,197,195,197,197,197,198,195,192,191,191,191,190,190,192,192,191,193,194,197,196,195,194,194,191,188,192,195,196,196,194,190,191,191,191,198,200,201,197,196,198,200,203,201,201,201,198,197,199,198,201,200,198,198,200,199,197,197,199,196,199,201,198,194,198,198,194,195,194,197,197,195,195,194,191,192,191,190,191,191,190,192,193,194,195,194,194,191,187,185,186,192,194,196,196,195,193,192,191,202,202,201,198,197,199,201,203,199,197,199,199,198,196,197,195,198,196,196,200,202,201,199,197,197,196,196,193,190,191,193,196,198,199,199,198,198,195,196,189,192,192,192,192,194,191,189,190,191,193,192,190,188,186,186,188,192,195,196,196,196,193,191,191,202,202,199,199,199,199,201,200,197,195,198,197,200,196,194,196,199,198,200,201,201,198,197,196,195,197,195,195,195,196,197,197,198,197,193,195,194,194,192,193,194,194,193,192,192,192,193,191,190,192,191,189,187,187,189,191,193,195,196,195,194,197,191,192,201,200,199,200,197,196,197,197,196,195,199,198,199,197,197,197,198,199,196,200,201,197,199,197,198,197,196,196,198,195,197,197,195,192,192,192,193,194,192,189,192,191,190,193,192,192,191,187,191,190,189,188,187,190,191,192,193,193,196,195,194,196,192,192,202,198,199,201,199,197,196,195,195,196,195,197,195,197,193,192,197,197,198,201,201,200,199,199,201,197,198,193,195,195,191,191,190,189,190,192,193,192,191,191,190,190,189,190,187,189,188,188,189,187,189,188,187,187,188,191,192,192,195,195,195,196,194,191,203,201,199,201,200,198,194,193,192,194,195,198,198,196,192,197,196,193,195,199,199,198,200,201,198,196,195,192,194,193,189,188,187,188,189,191,191,192,193,194,194,191,190,189,190,192,189,185,187,188,189,189,190,185,185,188,192,191,194,194,195,195,194,192,204,203,202,200,199,197,194,195,195,193,197,197,197,196,198,198,195,192,196,198,197,196,197,196,195,193,192,190,189,188,187,187,191,190,190,189,189,191,192,192,193,191,189,190,190,187,188,186,186,184,184,185,187,188,188,187,191,192,192,193,194,194,193,194,203,202,202,200,197,196,196,194,195,194,194,198,195,199,196,192,196,197,198,196,198,197,197,195,194,193,190,188,188,189,189,190,194,192,192,192,194,193,192,192,193,191,188,190,188,188,186,183,183,184,184,183,183,187,186,190,187,188,190,192,193,193,194,195,201,201,205,201,199,198,199,194,195,195,195,197,199,202,199,197,196,196,196,197,197,195,193,194,189,190,188,189,190,191,192,194,192,191,189,190,193,194,192,191,191,190,188,186,185,186,186,183,182,181,186,186,181,181,184,188,192,190,190,192,194,194,196,196,201,205,204,201,200,200,197,194,200,197,196,202,202,199,197,198,197,191,191,195,195,192,193,193,189,188,189,191,192,194,194,194,193,193,191,191,192,191,189,187,188,186,184,182,184,185,184,186,186,183,181,183,184,183,183,188,193,192,192,191,195,195,195,197,201,204,203,201,201,201,198,202,201,197,197,202,199,196,195,195,194,195,192,194,191,191,194,194,194,192,191,193,190,189,191,190,189,191,189,190,188,188,186,185,184,183,184,183,181,180,179,181,182,183,180,176,178,184,182,184,189,190,192,194,194,195,195,196,203,202,201,199,201,201,197,198,199,194,195,200,195,191,195,193,192,195,193,192,191,194,195,196,193,191,190,192,188,187,188,187,187,187,187,187,185,185,183,181,178,180,180,179,179,176,176,177,178,179,178,175,175,178,178,180,183,189,191,192,195,194,194,194,203,202,203,198,199,198,196,197,197,195,197,192,189,191,192,192,196,195,195,195,193,194,195,195,194,194,191,189,189,190,191,192,189,188,187,184,183,183,181,180,179,177,176,174,173,174,174,174,172,173,174,174,176,174,174,181,183,188,189,189,192,195,192,192,204,203,204,201,200,199,200,196,196,193,189,189,188,191,194,194,197,196,194,196,200,195,192,195,199,196,193,193,194,195,195,195,194,190,188,186,184,181,180,180,179,177,175,173,169,169,170,170,169,172,172,173,177,175,174,179,185,185,186,187,190,194,190,192,203,203,203,203,201,198,198,193,192,188,190,187,187,191,194,196,197,198,197,194,196,197,195,196,195,192,191,189,189,190,189,190,189,188,186,185,183,180,178,180,180,175,172,172,168,167,165,166,167,170,171,169,170,171,171,177,178,180,182,183,187,190,191,192,202,202,205,204,203,200,194,188,188,187,189,187,188,191,193,196,196,196,197,193,195,197,195,194,191,190,191,187,183,186,187,188,187,186,184,183,181,178,176,178,175,174,173,173,169,169,165,164,166,166,166,166,167,168,169,175,176,174,177,177,183,187,188,193,201,201,202,199,201,200,193,190,187,185,179,183,188,191,191,193,190,191,197,197,195,194,193,193,193,192,191,188,187,186,187,186,186,186,184,180,177,177,179,177,176,173,171,169,171,171,165,163,163,165,164,164,167,169,168,171,173,174,174,175,180,184,188,193,202,202,201,195,197,200,195,193,193,185,184,184,187,189,194,193,190,192,198,197,197,197,194,194,193,192,192,191,190,189,186,184,185,183,178,179,181,180,179,177,175,173,169,166,167,167,169,166,163,167,166,164,165,168,169,173,171,177,172,171,178,183,187,191,203,205,203,198,198,198,196,194,193,190,189,186,188,188,192,190,191,193,195,196,195,198,198,197,194,194,191,191,190,185,183,184,183,180,179,180,181,180,178,178,176,173,168,165,164,163,164,165,165,166,167,164,162,166,170,173,171,173,171,168,174,181,186,190,201,205,203,204,199,195,193,191,192,191,189,189,191,189,192,192,191,195,196,194,193,196,195,194,195,194,192,190,189,184,183,182,181,179,178,179,178,177,177,179,176,171,167,165,164,162,162,164,164,167,169,163,163,166,168,173,171,171,169,168,171,179,183,188,204,203,201,204,200,196,191,188,191,188,185,188,188,186,194,194,191,195,194,194,192,194,197,194,193,193,190,188,187,185,185,182,181,182,178,176,176,179,178,176,175,171,170,167,164,163,164,167,164,164,167,166,163,164,168,172,172,172,167,165,168,177,181,186,205,203,203,203,200,196,191,189,195,190,183,186,192,190,190,193,193,194,193,194,193,194,197,197,196,195,193,191,188,185,184,184,183,181,179,177,176,177,176,176,174,171,171,169,167,165,165,166,166,164,164,163,162,163,167,170,169,169,165,164,168,174,180,186,203,202,203,201,199,197,192,194,197,192,190,192,194,189,191,194,195,192,193,191,190,194,197,198,197,195,195,195,190,184,182,182,181,179,178,178,177,176,176,176,175,175,174,173,170,169,168,169,165,163,163,161,159,162,162,165,166,168,164,165,168,174,182,187,203,200,199,199,199,198,190,192,197,198,195,194,192,185,187,192,191,192,191,191,190,195,196,195,197,197,197,195,192,189,186,186,182,180,180,180,180,180,180,180,178,177,176,175,174,172,170,170,166,168,168,164,160,161,157,161,164,167,164,164,169,176,183,188,204,197,198,199,198,196,195,198,199,198,192,189,190,185,186,189,186,191,192,191,192,193,190,191,197,199,199,195,191,190,188,186,184,182,182,182,180,178,178,179,178,176,175,173,175,173,172,172,169,171,168,164,161,161,157,162,163,163,159,164,170,175,183,189,204,199,199,198,196,200,200,201,200,192,189,188,187,187,189,188,186,187,191,193,194,193,191,189,196,199,199,197,195,194,192,188,186,183,183,182,180,175,175,177,177,177,174,172,173,173,173,171,170,172,169,165,161,162,161,162,163,164,158,165,172,174,181,188,204,201,196,196,195,199,199,200,194,186,184,188,189,188,190,186,184,184,186,188,192,192,194,190,192,199,197,194,193,191,190,187,186,185,181,180,178,176,176,175,175,174,171,171,174,175,174,173,170,170,167,166,162,160,162,159,162,164,160,165,171,174,181,186,197,197,198,193,195,198,197,195,188,188,185,190,191,189,188,182,182,188,190,190,191,196,198,189,192,198,194,191,191,190,189,187,186,185,181,180,179,177,175,173,172,171,171,173,174,175,174,173,168,169,167,165,162,158,158,159,161,162,161,164,170,173,181,186,197,199,199,199,198,195,193,188,187,188,188,192,192,188,183,176,180,185,190,189,190,195,198,192,190,192,188,187,189,189,188,187,184,184,181,179,174,172,171,172,171,170,170,172,172,172,170,168,166,166,168,166,161,156,158,161,162,161,162,166,172,173,178,185,198,200,201,197,198,193,188,186,188,190,192,190,188,188,187,185,180,186,187,189,190,194,195,192,189,190,190,188,187,188,186,181,180,180,179,176,173,172,173,175,174,173,173,171,172,171,170,168,167,165,165,164,161,157,155,161,162,163,161,166,170,172,179,186,198,201,197,196,195,195,192,190,188,190,193,192,187,187,186,185,186,188,186,187,187,190,192,193,191,193,191,189,187,185,186,183,177,176,174,173,172,172,172,173,174,175,173,170,169,169,166,164,163,164,165,164,162,158,155,158,161,162,162,165,169,171,179,184,202,199,197,201,201,193,191,191,186,191,192,195,191,189,186,181,185,188,190,190,190,193,194,193,195,195,192,190,188,187,187,184,180,178,174,173,172,172,171,171,172,171,170,167,165,164,162,161,161,162,163,163,161,159,158,161,163,164,163,168,170,171,181,185,201,200,198,199,199,192,189,192,188,188,191,191,187,190,184,183,185,190,191,194,193,194,197,193,193,194,191,188,187,187,187,184,183,180,178,177,176,174,172,172,170,170,170,169,168,168,165,163,160,163,165,164,162,160,161,165,168,169,167,169,171,175,183,187,199,205,204,203,203,193,189,193,191,189,187,188,192,193,186,185,187,190,190,191,192,196,197,192,193,192,191,188,187,189,189,186,183,179,178,177,177,174,174,173,173,174,174,174,171,171,171,169,167,167,167,166,163,161,161,166,169,169,166,169,172,177,185,189,197,200,203,202,202,195,191,192,188,187,187,187,192,193,186,184,189,191,192,194,196,196,194,193,192,190,189,188,188,188,186,183,180,177,176,175,174,171,171,172,173,176,173,174,172,170,170,169,168,166,166,165,164,162,161,169,170,168,169,171,174,181,188,191,198,201,202,201,198,195,193,195,192,187,189,189,191,191,183,185,190,190,192,193,196,194,191,193,192,189,186,186,187,185,184,181,178,176,174,173,172,169,167,167,172,173,171,173,171,168,167,167,166,165,166,165,164,162,163,169,168,171,170,170,176,183,188,192,199,198,200,204,198,192,191,195,191,187,185,184,184,190,187,187,189,193,192,191,194,191,192,193,190,189,188,186,185,184,184,182,178,177,174,172,170,170,169,169,170,172,171,172,170,166,167,167,166,165,166,165,163,162,163,167,171,173,171,170,180,186,191,192,196,198,198,201,202,196,192,195,190,186,185,187,189,192,189,185,189,192,192,190,193,193,195,192,192,190,189,188,187,183,181,180,176,173,173,172,172,174,173,172,169,168,170,171,169,168,167,167,166,166,166,164,164,165,166,170,174,173,171,173,183,187,191,194,197,201,197,196,198,193,189,191,187,185,186,188,193,190,185,184,186,190,190,190,193,194,194,190,191,191,191,189,187,184,180,178,178,174,173,174,172,173,175,173,173,170,170,169,167,169,168,166,167,165,165,164,164,166,168,173,175,173,171,178,185,188,187,193,199,200,199,195,197,192,186,191,187,183,183,188,190,188,181,182,186,187,190,191,193,192,192,188,188,189,188,190,187,184,183,181,178,173,172,172,173,176,174,173,175,174,170,167,164,166,167,167,165,166,166,164,165,169,170,172,174,172,173,179,188,188,189,193,203,202,199,197,196,191,188,191,190,187,185,189,193,191,184,183,184,185,187,188,189,190,191,188,190,189,185,187,185,183,183,183,177,175,175,172,171,175,172,170,173,172,171,170,166,165,164,165,165,166,165,165,168,169,169,171,172,173,177,184,189,187,189,190,201,197,196,198,195,190,186,187,189,186,188,191,194,195,190,191,189,188,190,190,186,191,193,192,192,190,186,185,182,179,180,179,174,173,175,174,173,175,173,171,171,171,172,171,168,167,168,168,167,169,167,169,169,168,169,175,176,174,180,186,189,190,191,190,199,196,196,195,193,190,186,183,187,186,188,194,196,197,193,194,192,189,190,192,189,188,190,193,191,191,185,183,182,179,176,174,173,174,175,175,172,173,174,173,171,170,173,173,172,170,171,171,171,172,171,169,169,172,172,176,177,177,181,187,190,190,190,189,199,197,197,196,196,193,188,184,187,189,190,193,195,197,192,192,193,191,191,190,189,187,188,192,190,189,186,183,185,181,175,176,176,176,176,175,172,174,175,174,174,174,175,173,172,174,174,175,175,175,173,172,173,173,173,177,178,182,187,188,189,190,187,185,200,196,197,199,197,194,190,185,190,191,191,191,196,197,193,196,197,192,191,191,192,189,189,191,190,190,188,183,183,185,183,180,178,180,180,178,175,175,175,175,175,175,175,173,175,178,179,178,178,177,174,173,174,174,174,178,182,186,189,189,192,189,186,188,196,196,192,198,196,195,191,189,196,194,193,191,194,197,195,195,198,196,192,189,188,189,187,189,191,189,189,185,182,186,186,183,181,181,182,180,179,178,178,179,179,178,177,177,180,182,180,181,180,179,175,173,172,172,178,184,187,188,188,189,190,189,186,187,197,198,193,198,197,196,196,194,196,195,195,196,194,195,192,192,195,197,194,191,190,189,189,188,189,189,189,188,186,184,184,183,181,181,179,181,183,183,183,181,180,180,181,183,184,184,184,184,182,181,178,175,176,175,181,189,189,188,189,189,189,188,186,186,198,199,198,195,197,198,195,193,194,197,197,198,196,193,195,192,198,199,195,195,194,196,195,192,191,190,190,191,188,189,187,188,187,187,188,187,188,187,187,185,185,185,186,186,187,187,188,187,186,184,179,179,180,181,184,188,190,188,188,188,188,184,185,186,202,200,198,195,198,197,195,193,193,195,196,196,200,195,196,192,195,199,202,198,196,198,198,195,195,194,193,193,190,190,191,192,192,191,192,193,193,191,189,190,189,189,190,189,188,187,184,184,185,183,184,184,182,183,188,187,189,189,190,190,188,186,186,187,201,199,194,193,196,198,196,194,193,190,192,197,199,201,199,192,193,198,203,201,201,200,202,200,200,198,196,195,197,195,195,196,195,194,193,193,197,197,193,194,192,190,189,189,191,189,188,188,189,190,189,188,187,189,189,191,192,190,192,192,190,188,187,188,202,201,196,191,193,196,196,195,193,193,195,201,199,202,203,202,197,201,200,199,199,199,201,202,199,199,199,196,196,195,192,192,192,193,194,192,195,195,193,191,190,191,189,190,189,189,190,187,190,194,191,189,189,189,191,193,192,193,194,192,193,191,190,186,200,199,196,194,193,198,194,196,194,195,199,200,202,203,205,208,207,202,201,197,199,199,196,195,197,195,193,195,194,193,194,193,192,194,195,194,192,190,191,193,191,192,191,188,189,190,191,192,190,192,189,191,192,191,193,194,194,194,194,193,191,189,192,190,199,196,194,193,192,194,192,194,196,194,198,200,202,201,204,203,205,205,200,198,197,198,196,197,198,199,195,195,195,192,190,190,193,193,192,194,192,190,191,191,190,190,188,191,189,191,189,187,182,184,189,191,191,192,191,193,190,191,193,192,191,192,188,189,200,195,193,192,194,194,196,194,195,195,197,201,204,203,204,205,204,203,201,203,200,202,199,196,199,199,199,198,199,196,192,191,193,194,194,195,192,192,190,187,188,190,188,189,188,182,185,185,185,185,190,190,190,189,190,189,191,191,193,193,194,194,191,191,203,199,195,194,194,194,199,200,195,197,194,200,201,202,202,204,203,203,201,197,199,202,203,204,197,198,197,196,199,198,195,194,190,191,191,193,192,194,194,193,191,185,185,183,184,187,187,186,183,187,190,189,185,186,187,189,191,191,194,194,194,192,193,193,203,198,197,197,197,197,198,203,200,195,193,195,195,199,201,204,203,201,200,197,198,197,197,198,196,196,197,193,196,195,193,193,191,190,191,191,193,192,190,191,190,185,187,186,187,185,188,186,189,189,189,188,186,188,189,191,192,192,194,194,195,193,193,192,198,196,198,198,199,200,201,201,201,199,196,194,196,193,196,201,202,200,199,198,199,195,193,195,193,192,191,190,191,190,191,189,187,186,186,186,190,190,192,192,191,192,188,189,183,187,187,187,192,192,191,190,189,191,192,194,194,193,195,195,193,193,192,191,196,196,200,202,203,202,202,200,200,201,199,197,195,192,199,201,202,199,195,193,193,198,197,198,196,194,190,189,191,191,191,192,190,190,192,189,191,191,193,191,189,188,185,184,185,189,189,190,193,195,194,192,193,194,194,195,196,195,195,192,192,190,190,190,196,197,200,199,199,200,199,198,198,197,199,198,196,196,198,200,200,202,197,194,197,196,195,196,197,195,193,189,188,187,185,186,189,188,191,190,189,190,189,187,185,185,184,188,188,188,187,192,194,196,195,194,194,196,194,195,197,196,191,189,191,190,189,190,195,197,197,198,200,199,198,200,198,196,197,197,197,199,199,198,200,201,195,193,197,196,195,194,194,194,194,193,191,189,187,188,188,187,186,185,186,186,186,185,185,186,187,189,189,189,189,192,193,193,193,192,192,192,194,196,196,193,191,189,191,190,189,189,198,199,199,201,201,200,202,200,199,197,197,197,199,200,197,198,197,197,194,193,197,199,198,195,197,196,193,191,190,189,188,186,186,187,186,186,184,185,188,186,185,185,188,188,187,190,191,192,194,196,194,193,193,194,196,197,194,192,191,190,190,190,190,190
        //)
        //val app = readMat(appfile)
        //Grayscale(app)

        //val orafile :String =this.getApplicationInfo().dataDir+File.separatorChar+"Average_Orange.csv"
        //val ora = intArrayOf(194,195,198,198,200,200,199,197,193,191,192,192,193,195,196,196,195,195,195,196,197,196,196,198,199,199,200,201,205,204,203,203,203,202,200,197,195,194,195,198,198,199,199,197,198,198,199,198,199,199,196,197,197,196,197,198,200,200,200,200,199,200,198,197,194,195,198,199,200,200,198,197,193,194,193,192,193,195,195,196,195,194,193,194,196,196,195,196,203,200,199,200,203,205,205,205,204,205,203,201,200,199,198,199,202,203,202,198,200,200,199,197,197,196,197,196,197,196,197,198,199,198,198,198,197,198,196,197,194,195,198,201,201,199,199,199,197,196,195,194,194,194,194,194,194,195,195,195,199,201,202,201,203,205,204,201,198,201,202,202,201,200,200,198,198,199,201,201,201,205,204,203,203,201,199,195,195,197,197,198,197,196,196,197,197,196,196,197,197,198,197,197,195,197,200,201,201,200,202,204,200,200,198,198,198,195,194,193,192,195,198,198,199,202,201,201,203,204,203,201,197,201,204,204,204,201,199,200,199,196,196,198,199,201,202,205,203,204,201,197,196,198,198,197,197,198,196,196,196,195,195,197,198,199,197,195,198,199,201,201,201,202,203,203,201,199,197,199,195,195,195,196,195,196,198,199,202,200,199,199,205,207,207,205,203,205,206,205,204,200,200,200,201,202,204,207,207,205,205,207,207,204,202,200,201,201,201,198,198,199,195,196,196,195,197,199,200,199,196,194,196,198,201,202,204,203,204,202,200,199,197,196,194,196,197,197,196,195,198,203,203,206,208,209,210,211,211,208,209,206,205,202,198,198,199,198,200,203,206,208,209,210,205,206,207,205,204,205,207,204,204,202,199,200,200,196,196,197,199,200,199,197,196,194,197,198,200,202,204,205,203,201,199,197,196,194,196,197,197,196,193,195,201,206,206,206,206,207,206,207,208,209,212,212,209,204,200,199,199,201,203,204,206,207,207,207,208,207,207,208,209,205,205,209,207,202,203,201,201,196,196,197,198,199,198,197,196,195,195,198,201,203,204,205,204,201,196,195,193,195,196,195,194,194,197,198,203,206,204,204,202,203,204,207,208,211,212,212,213,210,203,202,202,204,204,204,205,205,206,207,209,210,209,207,208,209,210,210,208,207,203,205,200,197,196,195,195,197,197,198,197,195,194,197,200,202,204,204,203,199,196,194,195,194,194,194,195,198,198,200,204,204,202,202,203,205,205,206,209,210,208,208,210,208,203,204,208,209,210,212,210,208,209,209,207,208,210,210,209,210,210,212,207,206,206,203,200,193,194,194,195,199,198,198,197,196,196,197,198,199,201,202,200,198,195,196,196,195,195,196,197,199,204,203,204,204,201,204,204,204,203,204,206,207,205,204,206,206,205,207,210,212,213,212,210,210,209,210,207,207,206,210,210,210,212,212,211,209,207,203,199,195,193,195,195,200,200,197,195,195,197,198,200,200,200,199,198,196,196,196,195,196,196,197,198,199,201,200,202,204,202,204,204,202,199,202,203,203,204,205,207,210,212,214,212,212,213,213,211,211,211,212,209,207,209,212,211,210,210,212,213,213,211,204,199,197,196,194,195,199,200,198,195,196,197,197,202,202,200,196,196,197,196,195,195,196,197,199,198,199,198,202,205,206,203,202,199,196,197,200,202,202,202,205,208,213,215,218,218,218,216,215,215,214,212,212,212,210,210,210,211,209,212,213,213,211,210,209,203,197,195,196,194,197,199,200,197,196,198,199,203,205,200,195,194,197,196,194,195,196,197,200,195,197,203,204,206,204,201,200,198,196,195,196,203,204,207,209,211,214,216,218,221,220,219,217,215,214,214,214,213,212,212,212,212,214,211,213,213,211,209,210,206,201,198,197,196,198,200,200,197,194,198,199,203,202,194,193,195,197,196,195,195,197,195,196,195,199,203,206,206,203,202,201,197,198,196,201,207,207,211,211,213,215,217,219,221,219,220,217,216,214,213,213,211,211,211,212,212,212,210,209,211,210,208,208,205,204,198,196,197,199,200,199,197,194,198,199,203,201,194,194,198,197,198,198,195,194,193,193,202,202,209,208,205,202,203,202,199,201,204,205,205,208,209,211,214,214,215,217,218,218,220,219,218,216,213,212,210,212,213,211,211,209,207,207,208,207,207,207,206,202,201,194,196,200,201,200,195,194,198,199,201,199,198,197,198,197,198,197,195,195,193,194,199,203,207,208,203,203,204,203,203,204,206,206,205,209,211,213,217,218,216,217,221,221,221,221,219,219,216,215,214,214,213,212,210,208,205,207,209,207,204,205,206,203,203,195,195,198,199,199,196,194,198,200,201,199,199,200,199,199,197,195,194,195,192,196,203,206,205,208,205,203,202,206,206,206,207,206,208,213,215,217,218,221,219,219,221,223,224,222,221,219,216,216,215,214,213,212,210,209,205,207,207,205,204,205,206,204,203,199,193,195,194,195,193,193,201,202,201,201,201,201,200,197,192,191,192,191,191,197,201,205,204,206,205,202,205,208,208,207,208,209,212,216,218,221,223,222,226,224,223,223,224,225,225,221,216,216,215,215,213,212,209,206,205,206,207,205,202,205,208,205,203,201,196,195,194,194,190,192,199,200,202,199,198,197,197,194,187,186,188,189,194,198,201,203,204,205,205,204,205,210,210,211,211,214,218,220,222,223,225,225,225,225,225,225,225,227,227,224,220,216,216,216,214,212,209,206,205,206,204,204,203,206,208,209,205,202,200,193,195,195,193,194,199,200,199,198,196,193,193,194,189,185,187,191,194,196,202,203,205,207,206,207,208,212,213,214,217,218,221,225,226,227,228,228,228,227,226,227,228,228,228,227,224,219,216,216,216,214,211,207,205,204,203,205,204,207,207,209,207,202,201,194,194,196,194,194,200,202,200,197,193,189,190,191,187,186,188,192,195,199,199,202,206,207,210,214,215,217,218,219,223,225,227,230,234,233,231,231,230,231,231,231,231,229,228,229,228,224,220,220,218,218,214,211,210,209,207,205,204,208,210,207,205,202,203,198,191,199,193,193,200,201,201,199,196,192,193,189,185,185,185,191,195,198,197,200,203,207,211,216,222,220,222,224,227,229,234,235,235,236,234,232,231,231,232,231,231,230,228,229,230,228,223,224,221,218,215,212,212,210,209,209,210,210,210,208,205,200,203,197,190,199,193,193,198,203,203,204,202,197,197,194,192,187,186,187,191,193,194,197,203,211,210,216,222,222,226,226,228,232,236,236,235,235,233,233,231,232,232,230,231,231,228,227,228,226,224,223,221,218,217,214,212,210,208,209,211,212,209,209,210,202,200,198,191,197,196,195,197,202,205,206,204,200,199,195,189,185,183,185,191,196,195,199,207,212,213,219,224,223,228,230,232,233,236,236,234,235,235,233,232,231,231,229,228,229,226,226,225,224,222,222,221,219,219,216,215,213,210,211,212,212,210,211,212,204,200,198,190,197,196,196,199,200,202,205,207,205,199,194,187,186,186,184,189,199,202,205,207,212,218,226,229,230,229,231,233,236,236,235,235,235,235,235,235,233,232,231,228,228,228,225,224,224,220,220,221,220,218,217,215,214,210,209,211,211,212,215,210,201,201,197,191,196,196,195,195,200,201,199,200,200,196,193,189,188,188,188,192,198,203,204,206,209,217,224,227,227,226,229,233,233,233,235,235,234,234,235,234,234,234,233,230,228,227,224,222,221,219,220,221,220,218,217,215,214,209,205,206,209,209,210,206,203,197,195,192,197,193,193,193,197,198,196,197,198,195,192,193,188,186,193,195,198,200,202,204,209,217,222,222,222,224,226,230,231,232,234,235,233,233,234,235,234,233,231,229,227,226,223,224,223,222,222,222,220,217,216,214,213,209,204,203,206,205,205,198,198,195,197,198,198,195,194,193,195,195,192,192,196,194,192,191,186,186,189,191,193,192,199,205,210,215,218,220,221,222,221,226,228,229,231,232,230,229,229,231,232,231,229,228,228,228,227,226,224,222,220,220,221,218,218,214,212,210,206,203,205,206,205,200,194,196,200,199,199,200,196,192,196,197,193,191,192,193,189,191,188,187,188,187,190,191,199,205,210,215,217,219,221,221,220,221,224,225,228,230,227,227,227,226,228,228,229,230,229,227,225,222,221,219,219,219,220,220,219,218,215,213,208,205,205,206,204,198,197,199,203,200,200,201,196,192,194,196,195,192,189,191,188,185,186,185,186,191,195,198,200,204,207,213,216,218,218,220,219,219,221,222,223,224,226,227,226,227,230,230,229,227,227,225,223,220,220,219,220,219,220,220,219,219,217,214,211,209,205,202,199,199,199,201,204,200,200,197,197,191,192,196,196,194,196,191,185,179,176,181,187,189,193,196,202,203,205,209,211,215,217,218,217,218,222,223,222,222,224,226,226,227,230,229,227,224,224,224,222,221,220,220,221,220,221,220,217,216,217,215,213,211,206,199,200,198,200,201,204,199,199,195,196,193,195,198,195,196,200,197,195,185,180,178,184,192,195,197,200,200,203,207,210,212,215,215,217,219,221,222,222,220,220,221,223,226,227,227,226,225,224,224,224,224,223,222,221,222,223,221,220,217,214,214,213,209,205,199,200,198,199,199,204,200,197,195,195,196,196,198,197,196,202,198,200,192,188,189,188,192,191,193,195,196,199,206,213,214,213,215,216,216,219,223,224,221,221,220,221,222,223,224,225,226,226,226,226,224,224,222,221,222,223,219,217,214,212,212,212,206,206,201,199,197,198,198,200,199,196,192,195,196,197,200,199,199,201,201,198,196,191,190,192,195,192,195,193,196,198,208,213,212,214,215,217,218,220,224,226,223,222,221,222,222,223,225,225,226,226,225,226,225,225,226,224,222,221,218,217,214,212,211,210,206,206,205,200,198,198,198,199,197,195,190,192,198,200,202,202,201,200,201,200,196,189,187,193,198,197,196,198,197,201,208,212,216,217,220,222,218,222,224,226,224,223,225,226,224,224,223,225,226,226,225,226,225,225,224,222,222,221,219,217,216,215,213,211,206,207,205,205,199,197,198,201,198,195,192,194,197,200,202,199,200,198,198,202,199,193,194,196,199,202,198,199,202,203,206,214,219,221,221,220,219,222,223,227,225,224,227,231,230,227,227,226,226,227,227,228,226,225,224,223,223,221,219,215,214,213,214,211,209,209,209,206,203,198,198,202,199,195,192,195,196,196,199,198,199,199,203,202,200,199,196,197,198,195,196,200,200,201,203,212,219,221,220,219,221,224,228,229,227,228,231,233,231,228,229,231,232,232,232,230,230,229,227,225,223,220,220,219,215,210,211,211,208,207,205,205,204,203,198,199,198,196,192,194,194,195,197,197,199,201,204,204,200,199,198,198,200,197,199,201,202,202,203,209,217,218,217,219,223,228,229,231,230,229,232,232,230,230,230,233,235,235,234,233,230,229,226,224,223,221,221,218,213,210,211,210,206,205,201,202,203,201,199,199,196,194,193,194,194,195,198,198,197,203,205,205,202,202,200,198,199,200,200,203,203,204,202,208,212,216,221,222,221,225,228,230,230,229,230,232,231,230,230,233,235,234,232,230,227,226,225,223,223,221,219,215,211,208,209,210,209,205,202,202,202,202,203,200,195,190,190,193,194,196,199,199,200,205,204,205,201,201,201,198,198,198,197,201,200,199,204,208,208,210,220,223,221,222,226,229,229,228,227,229,231,231,231,232,232,231,228,227,226,223,221,222,222,219,217,213,210,210,210,209,208,206,200,198,204,203,205,201,196,189,188,191,195,198,198,201,203,206,205,204,200,198,199,198,194,193,198,200,201,199,202,206,207,212,219,220,220,221,223,226,228,226,226,227,230,231,232,232,233,232,229,228,224,223,223,225,222,219,216,214,211,209,210,209,208,205,200,195,201,204,204,200,196,190,189,193,195,194,197,203,203,206,206,204,198,197,196,194,192,193,194,200,201,202,200,201,206,210,215,218,220,219,219,221,225,224,227,228,228,229,230,231,231,229,225,222,221,224,224,222,221,217,214,213,207,208,209,209,206,201,197,197,202,204,203,199,195,191,191,193,195,194,197,202,203,204,204,204,197,195,195,194,191,190,189,197,200,200,200,200,205,207,211,211,216,218,216,217,220,221,224,226,225,225,225,222,221,220,220,219,218,219,222,220,219,214,212,211,205,207,208,208,204,200,198,197,202,203,202,198,193,191,191,193,195,194,196,202,201,201,201,201,194,194,194,193,190,186,185,190,197,196,199,200,201,206,207,210,212,213,213,215,218,216,218,218,220,220,221,220,217,216,217,217,219,218,217,216,218,215,212,209,205,205,206,203,202,199,200,199,200,203,201,197,191,191,191,195,195,193,195,199,197,200,198,199,192,191,193,194,192,188,190,190,193,197,199,201,202,204,206,210,210,212,211,212,215,216,216,217,218,219,219,218,216,215,216,216,218,217,216,215,214,213,210,208,201,201,202,201,201,199,200,201,202,204,202,195,191,191,192,197,197,197,199,196,198,202,201,202,195,195,196,195,195,192,193,194,193,195,197,200,198,204,206,206,208,210,210,209,211,214,216,216,217,219,218,216,215,215,216,216,215,216,216,215,214,214,211,206,202,202,200,198,199,200,200,202,205,204,201,194,188,192,193,196,200,200,200,198,199,202,202,201,199,197,198,198,196,195,198,198,197,198,200,200,203,201,204,203,204,205,206,206,206,209,212,213,214,215,216,217,218,217,215,215,214,215,214,214,213,212,210,207,203,202,197,199,200,201,201,202,204,202,200,192,189,193,193,193,200,200,201,200,202,201,200,201,199,197,199,201,197,196,201,200,198,197,198,201,200,199,201,205,203,203,202,202,203,206,208,210,209,211,215,215,216,217,217,216,216,217,215,213,212,210,209,210,204,200,198,200,201,199,199,202,203,200,198,192,191,194,194,192,201,200,201,200,201,200,202,203,201,198,199,201,197,196,199,200,199,198,199,201,200,201,202,201,205,207,205,201,201,204,208,206,204,207,212,212,213,215,217,215,215,215,213,210,208,205,206,208,203,199,199,201,201,198,200,203,202,199,194,188,192,197,196,195,200,199,199,201,198,200,200,204,203,200,198,199,195,195,198,200,201,200,200,200,200,201,201,202,204,205,202,204,204,206,209,207,204,206,210,212,213,214,214,213,213,215,213,210,208,206,205,205,201,199,198,200,200,199,200,202,201,195,189,190,195,199,199,196,196,196,195,197,199,201,204,205,201,200,196,196,198,198,198,199,200,199,199,200,199,200,202,203,203,204,205,204,201,206,210,208,208,213,214,214,215,217,216,214,214,214,213,212,210,205,202,203,200,200,199,200,203,202,199,201,198,194,192,195,198,200,200,197,196,196,194,192,194,200,202,205,201,201,198,194,194,194,195,198,199,200,202,201,200,201,203,203,201,201,205,203,202,199,202,205,206,211,212,215,217,218,217,215,213,213,212,210,208,204,200,199,201,199,199,200,199,199,199,201,197,193,193,196,200,202,198,196,195,198,197,193,193,192,199,202,200,200,201,193,192,196,197,198,202,203,205,205,202,202,203,204,201,202,204,205,203,202,204,205,208,210,211,213,214,215,217,217,217,216,213,209,205,202,198,200,200,199,200,199,196,197,200,200,198,194,194,195,199,203,200,199,192,194,195,194,194,194,193,196,198,199,201,197,193,198,201,202,202,203,204,205,201,201,201,202,203,203,202,204,203,203,205,203,207,207,208,209,209,212,215,216,216,214,210,204,199,199,203,201,199,200,199,197,197,198,200,202,197,196,196,196,198,201,201,199,193,195,197,197,196,195,194,196,197,201,199,199,197,197,198,202,202,204,205,201,199,201,202,200,202,202,202,201,200,201,204,203,203,203,204,204,207,208,210,209,210,209,206,202,200,200,201,200,199,199,198,198,198,199,202,200,199,199,198,198,199,200,201,197,196,196,198,199,200,196,193,193,197,200,202,199,199,198,198,199,204,205,203,202,203,204,203,202,201,202,200,202,204,201,203,204,201,201,202,205,207,209,211,210,209,208,207,206,203,202,201,200,198,197,196,198,200,199,198,202,200,199,198,198,200,201,199,198,196,198,200,201,201,199,196,195,195,198,200,204,205,203,200,200,200,205,204,203,204,205,203,204,201,201,200,200,201,203,206,205,202,202,202,202,202,205,208,209,208,206,205,204,204,204,201,198,196,196,195,195,197,198,198,199,202,201,201,202,201,199,197,198,196,199,200,201,200,199,199,199,196,196,199,201,207,208,205,204,204,204,204,206,206,205,206,206,204,202,201,200,200,202,204,206,206,203,203,203,202,202,205,205,206,204,204,205,204,202,199,197,196,197,194,192,193,197,198,199,201,201,202,204,200,199,197,197,198,198,200,201,201,199,201,202,199,199,200,204,203,203,204,204,206,204,202,206,207,206,207,207,206,206,207,205,202,201,203,206,207,207,207,206,205,202,202,204,205,205,204,204,203,200,198,197,197,197,194,194,195,195,197,198,199,201,202,201,201,201,198,197,199,200,201,200,200,200,201,202,201,201,200,199,199,201,202,202,202,205,205,204,203,206,208,208,208,207,208,209,205,205,207,207,206,208,208,206,205,203,202,203,203,203,203,201,202,200,196,198,196,198,198,194,194,195,196,199,201,201,200,201,201,200,196,197,198,200,201,200,200,201,203,203,199,198,198,198,200,203,201,200,203,203,203,205,203,204,204,207,207,207,206,204,208,210,211,210,209,209,209,208,207,206,205,205,203,203,201,201,202,199,195,195,195,196,195,195,196,197,200,201,200,200,200,201,201,199,196,197,197,198,201,203,201,201,202,201,198,197,198,200,200,199,197,200,203,203,204,203,199,196,199,200,204,206,207,208,209,209,210,210,210,211,210,210,209,207,203,201,203,200,199,200,201,200,196,192,192,193,194,195,196,198,200,198,200,202,200,199,199,198,197,198,197,199,203,204,202,200,200,200,199,198,200,200,198,199,199,199,201,204,204,202,200,200,201,203,205,204,203,202,200,200,204,205,205,203,203,205,204,201,197,197,200,201,198,197,198,197,196,194,193,195,196,195,197,195,195,196,200,200,198,198,199,199,198,197,197,200,201,202,201,199,199,199,196,198,199,198,198,198,199,199,199,199,199,202,202,202,201,202,202,203,203,202,200,201,202,204,202,198,198,200,198,196,194,195,198,197,197,195,196,196,195,194,195,197,196,193,195,195,195,195,197,198,198,198,198,199,197,196
        //)
        //val ora =readMat(orafile)
        //Grayscale(ora)
        // banfile :String =this.getApplicationInfo().dataDir+File.separatorChar+"Average_Banana.csv"
        //val ban = intArrayOf(208,208,209,208,209,209,209,208,209,210,210,210,209,212,211,211,212,212,212,213,214,214,214,214,214,214,215,211,213,215,215,215,216,215,215,213,213,213,213,212,209,210,212,211,210,210,210,210,211,212,210,208,208,207,207,207,206,206,208,208,209,210,209,209,208,208,208,208,208,209,210,209,209,208,208,208,209,212,212,212,211,212,212,213,212,212,213,215,216,216,216,215,213,217,217,216,216,217,215,212,212,213,212,211,213,211,209,208,208,208,208,208,209,212,211,210,207,205,205,205,207,209,208,208,207,207,207,209,208,209,209,209,209,210,211,211,210,208,208,208,208,210,210,210,210,211,211,211,211,212,213,215,217,216,215,213,213,215,215,215,215,215,214,212,213,213,211,209,211,208,209,211,208,208,208,208,208,209,211,212,211,208,208,210,208,208,206,208,206,205,206,206,208,209,209,209,209,209,209,209,209,209,209,208,208,209,209,208,209,210,210,210,211,210,214,215,217,215,215,215,214,215,216,218,216,215,215,212,211,211,211,209,208,211,210,207,209,209,211,211,210,209,206,209,212,212,211,209,209,207,205,206,209,207,206,207,209,209,209,209,209,209,209,209,209,209,209,209,208,210,210,209,209,211,210,210,212,212,214,216,216,216,217,217,217,218,218,218,217,217,215,213,211,213,215,214,212,213,215,214,215,213,212,211,212,211,210,211,213,213,214,216,212,208,208,209,211,210,209,209,210,209,209,208,208,209,208,208,207,207,208,208,207,210,210,209,209,209,212,212,214,214,214,216,216,217,217,216,216,214,214,215,214,212,211,212,212,212,213,214,213,215,216,214,213,213,213,210,208,208,210,214,214,212,213,219,216,212,207,208,209,209,210,209,210,208,209,209,207,207,208,208,208,207,207,207,208,211,209,207,211,212,211,211,214,215,215,215,215,214,215,214,214,213,211,211,212,210,211,211,213,213,212,212,213,217,217,216,214,213,211,209,208,208,208,212,214,211,212,216,217,216,209,207,208,209,211,211,210,210,210,209,207,209,210,209,208,207,207,206,208,211,212,212,212,213,213,212,212,213,215,216,215,215,214,212,213,211,209,208,211,209,211,211,213,213,212,211,214,217,216,216,214,211,211,210,209,208,207,209,211,211,214,215,213,214,209,207,207,210,210,208,212,213,213,211,211,210,209,211,211,209,209,209,207,211,211,212,214,213,213,212,211,212,212,216,217,215,215,213,211,208,208,209,210,209,212,211,211,212,212,209,211,213,213,214,214,213,211,210,210,208,206,207,211,212,216,214,210,209,209,209,211,210,209,211,213,214,214,212,212,211,211,213,212,211,211,213,213,213,213,214,215,216,216,216,214,212,214,215,214,214,213,209,209,207,207,208,211,212,213,212,209,209,208,208,211,213,212,213,216,215,212,211,208,206,203,205,208,215,215,213,210,208,209,210,212,211,209,211,213,215,214,213,213,210,211,214,211,210,212,213,214,217,215,214,214,215,216,215,215,215,215,215,213,213,214,213,211,210,209,209,212,213,215,213,212,211,206,206,209,212,213,213,216,215,211,211,209,207,203,204,205,212,214,215,209,207,208,214,214,214,213,213,213,214,213,212,211,208,212,213,212,212,212,213,214,219,218,216,216,216,216,216,216,216,218,221,221,219,218,214,213,214,213,213,214,214,215,215,213,213,209,206,206,209,208,209,212,213,212,210,209,205,206,206,206,207,210,213,209,208,207,213,215,213,215,215,213,213,213,212,210,209,210,211,214,212,212,213,213,215,219,219,215,214,214,216,216,216,218,217,219,220,219,216,216,216,215,214,216,214,214,214,213,210,208,206,210,210,213,213,213,213,211,209,210,207,207,208,209,209,211,212,210,207,206,214,216,214,215,215,212,212,213,213,211,210,210,214,213,213,213,213,213,214,218,218,218,216,216,216,215,216,217,216,216,214,216,218,219,220,215,215,215,214,213,213,214,212,208,209,211,214,211,212,212,214,211,209,209,208,207,208,209,209,211,213,210,208,206,213,217,215,215,216,212,211,211,210,209,209,211,214,214,215,214,213,213,213,214,216,218,216,216,217,217,219,219,218,216,215,216,218,217,214,213,217,217,218,216,215,216,212,206,208,211,211,213,210,210,212,210,207,208,206,205,205,205,206,210,212,212,207,206,211,216,216,215,217,209,209,209,209,209,209,211,212,213,215,215,214,211,212,216,217,216,215,216,218,220,220,221,219,218,217,217,215,216,214,214,215,218,219,217,216,215,212,208,209,210,211,211,210,211,214,212,209,207,204,207,206,205,207,213,212,212,209,207,208,212,216,214,216,209,208,208,208,208,209,209,210,211,214,214,214,214,214,215,216,219,220,220,220,221,221,220,220,216,213,213,213,214,214,214,215,218,218,215,216,215,216,212,210,211,210,211,213,215,215,212,210,210,212,208,205,208,209,211,214,214,207,207,206,210,214,213,215,209,208,207,207,206,207,210,211,212,213,213,214,215,215,217,215,217,219,222,221,220,218,218,215,216,217,219,217,214,213,213,214,220,217,214,214,216,216,216,214,214,211,212,209,211,210,208,208,208,211,209,207,208,210,212,213,213,210,213,209,211,214,213,215,210,209,208,208,210,209,211,211,211,211,212,214,216,216,216,216,217,218,219,220,222,219,217,216,218,220,219,220,218,217,217,218,220,219,218,217,217,217,215,216,216,213,213,211,207,208,206,206,209,210,209,209,208,210,210,212,213,212,211,212,211,214,215,215,209,208,208,208,208,210,211,212,210,210,211,214,216,215,214,215,214,217,219,220,219,220,221,220,220,221,220,221,221,220,220,223,222,221,219,219,219,218,214,215,216,215,215,213,207,208,206,205,210,211,210,209,207,207,208,209,211,208,210,212,213,213,214,215,210,210,210,212,210,211,211,212,210,209,209,211,214,214,214,213,213,216,216,216,217,220,221,222,223,224,226,224,223,221,222,225,222,223,221,219,219,217,213,215,217,216,215,215,213,206,204,204,208,212,212,211,210,210,207,205,207,209,210,212,212,214,214,216,210,209,210,212,211,212,212,213,212,211,211,212,212,214,214,214,214,216,213,214,219,219,222,223,224,225,225,224,222,221,221,221,220,219,221,222,217,215,213,214,216,213,214,215,212,210,211,209,207,211,211,210,212,211,206,204,207,204,207,213,213,212,215,214,210,209,209,213,213,215,215,215,214,213,212,212,214,216,216,216,216,218,217,218,222,222,224,222,224,225,224,223,223,220,219,219,218,218,219,219,216,216,213,214,216,215,216,215,213,215,216,213,208,209,210,211,209,208,206,203,206,204,207,211,215,213,214,214,212,211,213,214,216,216,215,215,214,213,212,213,214,215,217,218,217,217,221,220,223,224,226,226,225,224,223,223,219,217,220,222,221,221,220,219,219,218,214,215,218,218,216,215,212,211,210,210,207,208,209,210,206,206,206,205,203,204,208,211,215,214,215,216,213,213,216,217,218,217,215,214,213,213,214,215,215,217,217,219,219,218,221,220,222,224,226,228,226,223,221,219,218,218,221,222,223,224,224,220,222,220,216,216,215,215,215,215,213,211,209,207,207,211,212,207,204,207,206,204,203,204,206,210,216,215,215,215,212,213,216,217,218,217,215,215,214,213,215,215,215,215,214,216,219,220,223,222,221,223,223,225,224,224,222,219,219,217,219,222,224,225,222,220,223,222,217,217,215,214,214,218,214,212,207,203,204,210,209,205,203,206,206,204,202,202,204,207,215,216,215,217,213,213,216,216,217,217,215,214,215,214,216,216,215,214,214,214,218,221,224,223,222,221,221,224,223,225,223,219,220,220,221,223,223,225,222,222,222,220,215,216,217,217,218,216,217,216,209,201,203,212,208,204,203,209,208,205,203,201,203,207,215,215,215,216,214,213,217,217,217,215,214,214,215,215,215,216,215,214,214,215,218,220,223,221,221,222,222,223,223,223,222,221,223,225,223,221,220,224,221,222,221,219,216,217,219,219,218,215,214,214,211,206,203,208,207,205,205,208,208,206,203,202,202,206,214,215,215,216,214,214,219,218,216,215,215,216,216,216,215,216,217,215,215,216,217,219,223,223,220,222,222,225,225,222,223,224,224,224,222,221,219,220,218,221,222,219,214,216,219,219,218,217,216,212,208,205,206,208,206,207,207,206,208,206,204,203,202,204,213,215,216,217,214,214,219,219,216,215,217,218,218,217,216,216,218,218,216,216,215,217,221,221,222,224,223,226,224,223,221,221,222,225,222,221,219,220,219,220,221,218,215,218,219,217,214,214,214,212,207,203,210,211,207,209,210,208,207,205,203,202,203,206,213,213,214,216,214,215,219,219,217,215,216,217,218,217,216,217,218,217,216,217,215,219,221,220,223,224,226,226,226,224,221,220,221,223,220,219,220,220,217,217,217,217,219,218,217,214,211,214,216,212,207,206,210,211,208,211,211,208,208,205,203,202,205,208,213,211,212,215,214,215,219,218,217,217,216,217,217,218,219,218,217,216,218,218,218,221,221,219,222,223,226,225,224,222,220,222,223,220,218,221,221,220,217,216,218,221,221,222,219,216,213,216,215,212,208,210,210,208,209,211,209,207,208,207,205,204,206,207,213,213,212,211,214,216,220,221,219,216,218,217,218,220,221,221,219,217,217,218,218,222,222,220,222,222,223,224,224,221,221,223,224,223,219,220,219,218,217,219,221,219,220,222,219,216,217,214,211,210,207,208,209,208,208,209,207,209,209,208,206,202,205,206,210,212,212,209,216,216,221,222,220,220,219,218,220,220,221,220,219,219,219,217,220,221,221,220,220,224,222,221,223,222,222,223,222,222,219,217,217,216,217,219,220,217,218,219,218,216,217,214,212,211,208,206,208,206,209,209,206,209,209,207,205,201,204,205,206,206,209,208,216,216,219,221,220,220,220,219,220,221,221,220,219,220,220,218,220,220,221,222,223,225,225,222,221,222,221,219,218,218,219,216,218,218,219,222,220,218,215,215,214,216,214,212,211,212,210,210,210,208,209,208,208,209,209,207,206,203,203,204,205,205,206,208,215,215,218,219,219,218,220,220,220,221,220,219,219,220,219,217,219,219,221,224,225,225,224,223,224,223,221,218,215,214,218,221,219,219,223,222,218,215,214,214,215,215,214,214,212,210,210,213,210,210,207,206,207,209,207,207,206,202,204,205,206,206,205,206,214,215,216,218,221,220,221,223,220,219,217,215,217,218,217,219,219,217,219,223,223,227,224,222,224,223,221,219,221,219,219,221,217,220,220,220,216,215,215,214,218,215,216,217,215,213,209,210,207,209,208,207,208,210,208,206,206,203,205,205,206,204,206,206,215,216,216,219,222,222,223,222,222,218,215,213,214,215,219,220,218,217,223,222,223,227,226,225,225,225,223,222,222,220,221,220,217,219,221,219,216,215,215,215,215,213,214,216,214,211,207,209,209,208,207,207,208,211,209,208,206,204,207,203,206,206,206,205,213,215,216,217,221,221,223,222,222,219,217,214,215,218,220,221,220,222,222,222,223,226,227,227,225,224,224,223,223,222,222,218,216,219,221,214,212,213,210,213,215,215,216,214,212,208,207,210,210,210,207,206,207,208,207,206,204,204,208,204,202,207,206,205,213,213,216,217,217,220,221,221,220,219,218,215,217,222,220,221,222,222,223,224,225,227,228,226,226,224,223,221,221,221,221,216,218,219,217,213,212,210,208,213,217,215,217,212,212,210,207,211,210,211,211,211,207,206,205,204,201,202,207,204,202,207,207,206,215,215,216,217,217,218,221,221,220,220,219,217,220,223,222,221,221,221,223,222,224,228,228,227,224,223,222,221,220,218,219,218,219,217,212,210,210,211,213,214,211,214,213,214,210,207,210,212,212,211,210,209,208,207,209,206,201,200,205,200,203,208,208,207,216,216,217,218,217,218,219,220,220,219,219,221,221,222,222,224,222,220,220,221,224,227,227,226,223,223,222,220,216,216,217,216,218,216,213,214,213,213,213,210,208,214,213,214,213,211,213,212,213,212,210,207,207,208,209,205,202,198,199,197,203,205,204,204,218,218,218,218,217,217,218,218,219,216,219,220,221,223,225,223,221,219,219,220,222,223,224,225,223,222,223,220,219,220,218,218,216,214,214,214,213,212,210,211,212,211,214,213,212,213,213,212,210,210,209,206,207,210,207,202,201,197,193,196,202,203,203,203,219,219,218,218,216,215,216,217,217,215,217,218,219,223,221,223,219,218,217,218,220,222,221,222,221,221,221,222,222,220,219,217,216,211,211,210,212,213,212,212,208,207,211,212,213,211,213,209,207,210,212,209,210,210,208,206,202,196,191,198,202,203,204,203,218,219,218,217,217,218,218,218,218,220,216,216,219,221,220,219,219,217,219,218,220,222,222,220,221,220,221,222,219,219,216,214,216,216,213,211,215,217,216,210,208,207,211,215,214,217,215,209,210,211,211,211,209,208,209,208,204,194,194,198,201,203,204,203,217,219,219,218,219,220,220,218,217,219,217,216,219,218,217,215,214,216,217,218,219,218,218,218,220,223,220,220,220,217,213,217,219,220,218,219,218,217,214,210,210,207,208,212,213,215,214,210,210,211,212,211,207,207,207,204,200,194,196,197,199,201,203,203,217,218,218,219,220,221,220,221,219,217,217,217,214,213,212,211,212,215,215,216,218,217,217,217,220,222,223,223,219,218,217,219,220,221,224,222,219,214,213,209,210,208,207,209,211,214,213,211,212,214,211,207,205,203,205,204,201,197,198,198,199,201,203,201,217,216,216,217,220,222,221,220,219,217,216,217,217,214,212,213,213,215,219,218,218,217,219,221,219,219,221,220,216,222,222,221,221,222,222,222,217,215,212,212,211,211,209,210,213,216,215,215,215,215,209,207,205,204,204,201,202,199,197,199,198,201,203,201,215,216,219,219,220,220,219,220,219,218,217,219,219,214,211,211,211,215,219,218,217,217,219,219,220,217,218,219,222,227,225,223,221,221,221,219,219,215,213,212,210,212,211,211,216,217,216,214,214,214,212,210,208,206,200,198,200,198,197,199,199,203,203,202,217,218,218,216,214,218,218,219,219,219,217,219,217,214,210,209,212,215,216,217,218,221,221,219,220,220,222,224,225,228,226,221,221,218,219,217,219,220,216,214,212,212,212,213,218,218,217,214,214,216,214,212,207,202,199,199,196,196,197,201,202,204,203,204,217,218,217,215,215,217,220,218,217,216,213,216,216,216,215,217,215,214,214,217,219,220,220,220,221,225,225,226,225,225,224,221,220,220,219,219,222,222,219,215,217,217,216,215,217,216,216,216,217,217,215,211,207,200,198,198,197,196,198,202,201,201,203,203,218,218,217,214,212,213,217,217,215,215,215,217,217,218,217,217,214,213,213,214,214,215,219,219,221,223,222,222,223,222,219,219,220,220,221,221,219,219,220,218,219,218,217,217,218,216,217,217,215,215,212,209,203,201,200,199,199,197,198,202,202,203,202,201,219,219,219,216,214,214,215,217,214,214,214,216,215,214,214,214,215,214,216,217,217,222,222,220,219,221,222,222,220,220,221,221,220,219,219,218,217,219,219,215,216,216,218,219,220,217,217,214,213,212,209,203,203,205,205,203,200,200,199,201,203,204,203,201,216,218,216,214,214,213,213,212,214,213,212,214,215,214,215,216,214,217,221,221,220,222,222,222,221,218,218,219,221,220,221,221,219,219,219,219,219,218,218,219,218,217,217,217,218,216,215,213,211,209,208,205,205,205,205,201,203,202,201,201,203,204,203,201,213,214,214,213,213,211,212,212,214,214,215,217,218,217,218,219,217,217,219,219,218,218,221,218,215,214,216,218,219,218,218,219,218,218,217,217,217,218,218,219,219,217,217,215,214,215,216,211,210,211,207,205,204,205,206,203,202,202,199,202,204,205,203,201,211,211,212,212,212,214,215,215,215,214,214,215,216,216,216,217,217,216,217,216,214,215,214,213,213,214,214,217,219,219,218,218,215,213,216,217,216,217,218,219,219,220,217,214,215,214,214,211,211,208,206,205,202,205,204,203,202,201,201,201,202,204,202,201,210,208,208,208,208,208,209,210,211,213,212,212,213,214,215,216,216,214,214,215,216,216,216,214,216,217,218,218,217,217,216,215,214,216,217,218,219,221,222,221,221,220,218,214,212,212,213,212,208,208,206,204,203,205,203,202,201,202,203,203,202,201,201,201,210,208,207,207,205,204,205,203,205,205,209,210,210,211,211,212,212,213,212,213,215,216,217,217,217,218,218,219,217,217,216,216,216,217,218,220,221,222,222,221,220,218,216,213,212,213,213,208,208,207,205,205,205,202,203,201,201,203,203,202,202,201,200,200,210,210,206,206,206,207,207,206,207,207,210,211,213,212,213,212,211,212,213,212,213,215,216,217,219,218,220,221,219,216,216,218,218,218,218,219,220,221,220,219,217,215,214,215,213,213,210,208,207,206,205,206,204,202,202,203,203,205,205,202,201,201,201,202,207,206,207,206,208,206,205,206,207,208,209,212,213,212,212,211,211,211,212,212,213,215,215,215,216,218,218,220,219,218,216,216,216,215,215,216,219,218,215,215,216,216,217,216,212,212,211,209,205,205,205,205,203,201,202,203,202,204,204,202,201,202,201,202,207,206,207,207,207,207,205,205,205,207,208,209,213,212,212,211,210,207,207,209,212,213,213,213,214,216,217,217,220,220,218,215,214,213,213,212,214,217,217,217,218,217,218,215,212,212,210,207,206,206,203,203,203,201,201,203,203,204,207,206,204,203,203,203,207,206,206,208,208,208,208,207,209,210,209,208,209,212,212,213,212,211,209,207,208,210,212,213,214,215,216,216,216,218,217,216,215,213,213,214,216,217,217,216,218,217,215,213,210,210,208,205,203,204,204,203,203,201,201,203,204,205,206,206,205,203,202,202,207,206,205,207,208,207,208,208,207,208,208,208,209,209,212,211,212,212,212,212,213,212,212,214,215,215,216,215,215,215,217,217,217,217,217,217,218,217,218,216,213,210,212,210,209,208,206,204,203,204,204,205,204,203,202,201,201,203,205,205,204,204,204,203,208,206,206,206,207,208,208,208,207,208,208,209,209,209,210,212,213,214,213,213,214,214,214,214,214,215,214,214,215,214,215,219,219,218,216,216,218,218,215,215,213,210,211,208,207,207,206,205,205,205,205,204,202,202,202,201,201,204,205,205,205,204,204,204
        //)
        //val ban = readMat(banfile)
        //Grayscale(ban)

        //peac = Grayscale(readMat())

        //pear = Grayscale(readMat())



        //set variables to let us know which to return


        //val apple = 1

      //  val orange = 2

        //val banana = 3

        //int peach = 4;

        //int pear = 5;



        //find the distance between image and each comparison matrix

        //double disnot = distance(matrix, not)

        //val disapp= distance(matrix, app)

        //val disora = distance(matrix, ora)

        //val disban = distance(matrix, ban)

        //double dispea = distance(matrix, peac)

        //double dispear = distance(matrix, pear)



        /*if (disnot < disapp && disnot < disora && disnot < disban && disnot < dispea && disnot < dispear){

            return 0;

        } else if (disapp < disora && disapp < disban && disapp < dispea && disapp < dispear){

            return 1;

        } else if (disora < disban && disora < dispea && disora < dispear){

            return 2;

        } else if (disban < dispea && disban < dispear){

            return 3;

        } else if (dispea < dispear){

            return 4;

        } else {

            return 5;

        }*/



        //return whatever has the smallest distance

        //if (disapp < disora && disapp < disban){

          //  return apple

      //  } else if (disora < disban){

          //  return orange

       // } else {

         //   return banana

        //}

        return 0;

    }

    companion object {
        private const val TAG = "CameraXApp"
        private const val FILENAME_FORMAT = "yyyy-MM-dd-HH-mm-ss-SSS"
        private const val REQUEST_CODE_PERMISSIONS = 10
        private val REQUIRED_PERMISSIONS =
            mutableListOf (
                Manifest.permission.CAMERA,

            ).apply {
                if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.P) {
                    add(Manifest.permission.WRITE_EXTERNAL_STORAGE)

                }
            }.toTypedArray()
    }



}
